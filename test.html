<html>
  <head>
    <script src="js/jquery-2.1.0.min.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <title>DRONE FLIGHT</title>
  </head>

  <body>
    <div id="container" >
      <div id="title"></div>
      <img id="video" name="video" style="max-width:100%">
    </div>

    <script>
      function reloadVideo() {
        var video = document.getElementsByName("video")[0];
        /*$.ajax({
          url:'http://localhost:5555',
          type:'HEAD',
          error: function()
          {
            video.src = "./sample.jpg"
          },
          success: function()
          {
            video.src = "http://localhost:5555"
          }
        });
        */
        // video.src = "http://localhost:5555"
        $("#video").attr("src", "http://localhost:5555")
      }

      oldTitle = "";
      $("#title").hide();
      function reloadTitle() {
        url = "http://localhost:8000/title"
        $.get(url,{ "_": $.now() }, function(data){
          console.log("here", data)
          if (data != oldTitle) {
            $("#title").fadeIn(300)
            $( "#title" ).text(data);
            } else {
            $("#title").fadeOut(300);
          }
          oldTitle = data;
        });
      }

      //reloadVideo()
      //reloadTitle()
      setInterval(reloadVideo, 50)
      setInterval(reloadTitle, 1000)
    </script>
  </body>
</html>
