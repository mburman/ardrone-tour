<html>
  <head>
    <script src="js/jquery-2.1.0.min.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <title>DRONE FLIGHT</title>
  </head>

  <body>
    <div id="container" >
      <div id="title"><p> Drone Tour </p></div>
      <div id="overlay"></div>
      <img id="video" name="video" style="max-width:100%">
    </div>

    <script>
      function reloadVideo() {
        var video = document.getElementsByName("video")[0];
        /*$.ajax({
          url:'http://localhost:5555',
          type:'HEAD',
          error: function()
          {
            video.src = "./sample.jpg"
          },
          success: function()
          {
            video.src = "http://localhost:5555"
          }
        });
        */
        // video.src = "http://localhost:5555"
        $("#video").attr("src", "http://localhost:5555")
      }

      // GET OVERLAY FOR IMAGE.
      oldoverlay = "";
      $("#overlay").hide();
      function reloadOverlay() {
        url = "http://localhost:8000/overlay"
        $.get(url,{ "_": $.now() }, function(data){
          console.log("here", data)
          if (data != oldoverlay) {
            $("#overlay").fadeIn(300)
            $( "#overlay" ).text(data);
            } else {
            $("#overlay").fadeOut(300);
          }
          oldoverlay = data;
        });
      }

      //reloadVideo()
      //reloadoverlay()
      setInterval(reloadVideo, 50)
      setInterval(reloadOverlay, 1000)
    </script>
  </body>
</html>
